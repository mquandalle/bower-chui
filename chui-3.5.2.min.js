/*
ChocolateChip-UI
ChUI.js
Copyright 2014 Sourcebits www.sourcebits.com
License: MIT
Version: 3.5.2
*/
!function(e){"use strict";function t(e){return"tagName"in e?e:e.parentNode}function i(e,t,i,s){return Math.abs(e-t)>=Math.abs(i-s)?e-t>0?"left":"right":i-s>0?"up":"down"}function s(){if(c=null,u.last)try{u&&u.el&&(u.el.trigger("longtap"),u={})}catch(e){}}function n(){c&&clearTimeout(c),c=null}function a(){o&&clearTimeout(o),d&&clearTimeout(d),l&&clearTimeout(l),c&&clearTimeout(c),o=d=l=c=null,u={}}function r(t){function i(e){return/m/.test(e)?parseFloat(e):/s/.test(e)?100*parseFloat(e):void 0}var s,n;"transition"in document.body.style?s="transition-duration":"-webkit-transition"in document.body.style&&(s="-webkit-transition-duration"),n=i(e("article").eq(0).css(s)),setTimeout(function(){e(t).trigger({type:"navigationend"})},n)}e.extend({Uuid:function(){return Date.now().toString(36)},concat:function(e){return e instanceof Array?e.join(""):[].slice.apply(arguments).join("")},forEach:function(e,t,i){function s(e){var t=e.length,i=jQuery.type(e);return"function"===i||jQuery.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}var n,a=0,r=e.length,o=s(e);if(i){if(o)for(;r>a&&(n=t.apply(e[a],i),n!==!1);a++);else for(a in e)if(n=t.apply(e[a],i),n===!1)break}else if(o)for(;r>a&&(n=t.call(e[a],e[a],a),n!==!1);a++);else for(a in e)if(n=t.call(e[a],e[a],a),n===!1)break}}),e.fn.extend({iz:function(t){var i=e();return this.forEach(function(s){e(s).is(t)&&i.push(s)}),i},iznt:function(e){return this.not(e)},haz:function(e){return this.has(e)},haznt:function(t){var i=e();return this.forEach(function(s){e(s).has(t)[0]||i.push(s)}),i},hazClass:function(t){var i=e();return this.forEach(function(s){e(s).hasClass(t)&&i.push(s)}),i},hazntClass:function(t){var i=e();return this.forEach(function(s){e(s).hasClass(t)||i.push(s)}),i},hazAttr:function(t){var i=e();return this.forEach(function(s){e(s).attr(t)&&i.push(s)}),i},hazntAttr:function(t){var i=e();return this.forEach(function(s){e(s).attr(t)||i.push(s)}),i},forEach:function(t,i){return e.forEach(this,t,i)}}),e.extend({eventStart:null,eventEnd:null,eventMove:null,eventCancel:null,gestureLength:30}),e(function(){window.navigator.pointerEnabled?(e.eventStart="pointerdown",e.eventEnd="pointerup",e.eventMove="pointermove",e.eventCancel="pointercancel"):window.navigator.msPointerEnabled?(e.eventStart="MSPointerDown",e.eventEnd="MSPointerUp",e.eventMove="MSPointerMove",e.eventCancel="MSPointerCancel"):"ontouchstart"in window?(e.eventStart="touchstart",e.eventEnd="touchend",e.eventMove="touchmove",e.eventCancel="touchcancel"):(e.eventStart="mousedown",e.eventEnd="click",e.eventMove="mousemove",e.eventCancel="mouseout")}),e.extend({isiPhone:/iphone/gim.test(navigator.userAgent),isiPad:/ipad/gim.test(navigator.userAgent),isiPod:/ipod/gim.test(navigator.userAgent),isiOS:/ip(hone|od|ad)/gim.test(navigator.userAgent),isAndroid:/android/gim.test(navigator.userAgent)&&!/trident/gim.test(navigator.userAgent),isWebOS:/webos/gim.test(navigator.userAgent),isBlackberry:/blackberry/gim.test(navigator.userAgent),isTouchEnabled:"createTouch"in document,isOnline:navigator.onLine,isStandalone:navigator.standalone,isiOS6:navigator.userAgent.match(/OS 6/i),isiOS7:navigator.userAgent.match(/OS 7/i),isWin:/trident/gim.test(navigator.userAgent),isWinPhone:/trident/gim.test(navigator.userAgent)&&/mobile/gim.test(navigator.userAgent),isIE10:navigator.userAgent.match(/msie 10/i),isIE11:navigator.userAgent.match(/msie 11/i),isWebkit:navigator.userAgent.match(/webkit/),isMobile:/mobile/gim.test(navigator.userAgent),isDesktop:!/mobile/gim.test(navigator.userAgent),isSafari:!/Chrome/gim.test(navigator.userAgent)&&/Safari/gim.test(navigator.userAgent)&&!/android/gim.test(navigator.userAgent),isChrome:/Chrome/gim.test(navigator.userAgent),isNativeAndroid:/android/i.test(navigator.userAgent)&&/webkit/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)});var o,l,d,c,u={},p=750,v=150;e(function(){var r,h,g=e(document.body),f=!1;g.on(e.eventStart,function(i){if(r=Date.now(),h=r-(u.last||r),i.originalEvent&&(i=i.originalEvent),window.navigator.msPointerEnabled||window.navigator.pointerEnabled){if(window&&window.jQuery&&e===window.jQuery){if(i.originalEvent&&!i.originalEvent.isPrimary)return}else if(!i.isPrimary)return;i=i.originalEvent?i.originalEvent:i,g.on("MSHoldVisual",function(e){e.preventDefault()}),u.el=e(t(i.target)),o&&clearTimeout(o),u.x1=i.pageX,u.y1=i.pageY,f=!1}else"mousedown"===e.eventStart?(u.el=e(t(i.target)),o&&clearTimeout(o),u.x1=i.pageX,u.y1=i.pageY,f=!1):1===i.touches.length&&(u.el=e(t(i.touches[0].target)),o&&clearTimeout(o),u.x1=i.touches[0].pageX,u.y1=i.touches[0].pageY,f=2===i.targetTouches.length?!0:!1);h>0&&250>=h&&(u.isDoubleTap=!0),u.last=r,c=setTimeout(s,p)}),g.on(e.eventMove,function(t){if(t.originalEvent&&(t=t.originalEvent),window.navigator.msPointerEnabled){if(window&&window.jQuery&&e===window.jQuery){if(t.originalEvent&&!t.originalEvent.isPrimary)return}else if(!t.isPrimary)return;t=t.originalEvent?t.originalEvent:t,n(),u.x2=t.pageX,u.y2=t.pageY}else n(),"mousemove"===e.eventMove?(u.x2=t.pageX,u.y2=t.pageY):1===t.touches.length&&(u.x2=t.touches[0].pageX,u.y2=t.touches[0].pageY);if(e.isAndroid){if(e.gestureLength=10,!u.el)return;u.x2&&Math.abs(u.x1-u.x2)>e.gestureLength||u.y2&&Math.abs(u.y1-u.y2)>e.gestureLength?l=setTimeout(function(){t.preventDefault(),u&&u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+i(u.x1,u.x2,u.y1,u.y2)),u={})},0):"last"in u&&(d=setTimeout(function(){u&&u.el&&u.el.trigger("tap"),u&&u.isDoubleTap?u&&u.el&&(u.el.trigger("doubletap"),u={}):o=setTimeout(function(){return o=null,u&&u.el?(u.el.trigger("singletap"),u={},!1):void 0},v)},0))}}),g.on(e.eventEnd,function(t){if(window.navigator.msPointerEnabled)if(window&&window.jQuery&&e===window.jQuery){if(t.originalEvent&&!t.originalEvent.isPrimary)return}else if(!t.isPrimary)return;n(),u.el&&(u.x2&&Math.abs(u.x1-u.x2)>e.gestureLength||u.y2&&Math.abs(u.y1-u.y2)>e.gestureLength?l=setTimeout(function(){u&&u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+i(u.x1,u.x2,u.y1,u.y2)),u={})},0):"last"in u&&(d=setTimeout(function(){u&&u.el&&u.el.trigger("tap"),u&&u.isDoubleTap?u&&u.el&&(u.el.trigger("doubletap"),u={}):o=setTimeout(function(){return o=null,u&&u.el?(u.el.trigger("singletap"),u={},!1):void 0},v)},0)))}),g.on("touchcancel",a)}),["swipe","swipeleft","swiperight","swipeup","swipedown","doubletap","tap","singletap","longtap"].forEach(function(t){e.fn.extend({method:function(e){return this.on(t,e)}})}),e.extend({UIDesktopCompat:function(){e.isDesktop&&e.isSafari?e("body").addClass("isiOS").addClass("isDesktopSafari"):e.isDesktop&&e.isChrome&&e("body").addClass("isAndroid").addClass("isDesktopChrome")}}),e.extend({browserVersion:function(){var e,t=navigator.appName,i=navigator.userAgent,s=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return s&&null!==(e=i.match(/version\/([\.\d]+)/i))&&(s[2]=e[1]),s=s?[s[1],s[2]]:[t,navigator.appVersion,"-?"],s[1]}}),e(function(){e.body=e("body"),e.isWin?e.body.addClass("isWindows"):e.isiOS?e.body.addClass("isiOS"):e.isAndroid&&e.body.addClass("isAndroid"),e.isSafari&&6===parseInt(e.browserVersion(),10)&&e.body.addClass("isSafari6"),e.UIDesktopCompat()}),e(function(){e.body=e("body"),e.body[0].classList.contains("splitlayout")||e("body").prepend("<nav id='global-nav'></nav>"),e.body[0].classList.contains("splitlayout")&&window.innerWidth<768&&e("meta[name=viewport]").attr("content","width=device-width, initial-scale=0.45, maximum-scale=2, user-scalable=yes"),e("h1").each(function(e,t){t.nextElementSibling&&"A"===t.nextElementSibling.nodeName&&t.classList.add("buttonOnRight")}),e(".toolbar").prev("article").addClass("has-toolbar")}),e.extend({subscriptions:{},subscribe:function(t,i){e.subscriptions[t]||(e.subscriptions[t]=[]);var s=e.Uuid();return e.subscriptions[t].push({token:s,callback:i}),s},unsubscribe:function(t){setTimeout(function(){for(var i in e.subscriptions)if(e.subscriptions[i])for(var s=0,n=e.subscriptions[i].length;n>s;s++)if(e.subscriptions[i][s].token===t)return e.subscriptions[i].splice(s,1),t;return!1})},publish:function(t,i){return e.subscriptions[t]?(setTimeout(function(){for(var s=e.subscriptions[t]?e.subscriptions[t].length:0;s--;)e.subscriptions[t][s].callback(t,i);return!0}),!0):!1}}),e.extend({UITrackHashNavigation:function(t,i){t=t||!0,e.UISetHashOnUrl(e.UINavigationHistory[e.UINavigationHistory.length-1],i)},UISetHashOnUrl:function(t,i){i=i||"#/";var s;s=/^#/.test(t)?i+t.split("#")[1]:i+t,e.isAndroid?(/#/.test(t)&&(t=t.split("#")[1]),/\//.test(t)&&(t=t.split("/")[1]),window.location.hash="#/"+t):window.history.replaceState("Object","Title",s)},UIGoBackToArticle:function(t){var i,s,n=e.UINavigationHistory.indexOf(t),a=e("article.current"),o=e(t);0===e.UINavigationHistory.length&&(o=e("article:first-of-type"),e.UINavigationHistory.push("#"+o[0].id));var l;l=e.UINavigationHistory.length>1?e.UINavigationHistory.splice(n+1):e("article.previous"),e.publish("chui/navigateBack/leave",a[0].id),e.publish("chui/navigateBack/enter",o[0].id),a[0].scrollTop=0,o[0].scrollTop=0,l.length&&e.each(l,function(t,i){e(i).removeClass("previous").addClass("next"),e(i).prev().removeClass("previous").addClass("next")}),i=a.next().hazClass("toolbar"),s=o.next().hazClass("toolbar"),o.removeClass("previous next").addClass("current"),o.prev().removeClass("previous next").addClass("current"),s.removeClass("previous next").addClass("current"),a.removeClass("current").addClass("next"),a.prev().removeClass("current").addClass("next"),i.removeClass("current").addClass("next"),e(".toolbar.previous").removeClass("previous").addClass("next"),e.UISetHashOnUrl(e.UINavigationHistory[e.UINavigationHistory.length-1]),r(o)},UIGoBack:function(){var t,i,s=e.UINavigationHistory.length,n=e("article.current"),a=e(e.UINavigationHistory[s-2]);0===s&&(a=e("article:first-of-type"),e.UINavigationHistory.push("#"+a[0].id)),e.publish("chui/navigateBack/leave",n[0].id),e.publish("chui/navigateBack/enter",a[0].id),n[0].scrollTop=0,a[0].scrollTop=0,t=n.next().hazClass("toolbar"),i=a.next().hazClass("toolbar"),a.removeClass("previous").addClass("current"),a.prev().removeClass("previous").addClass("current"),i.removeClass("previous").addClass("current"),n.removeClass("current").addClass("next"),n.prev().removeClass("current").addClass("next"),t.removeClass("current").addClass("next"),e.UISetHashOnUrl(e.UINavigationHistory[s-2]),1!==e.UINavigationHistory.length&&e.UINavigationHistory.pop()},isNavigating:!1,UIGoToArticle:function(t){if(!e.isNavigating){e.isNavigating=!0;var i=e("article.current"),s=i.prev();t=e(t);var n,a,o="#"+t[0].id,l=t.prev(),d="next previous";e.publish("chui/navigate/leave",i[0].id),e.UINavigationHistory.push(o),e.publish("chui/navigate/enter",t[0].id),i[0].scrollTop=0,t[0].scrollTop=0,n=i.next().hazClass("toolbar"),a=t.next().hazClass("toolbar"),i.removeClass("current").addClass("previous"),s.removeClass("current").addClass("previous"),n.removeClass("current").addClass("previous"),t.removeClass(d).addClass("current"),l.removeClass(d).addClass("current"),a.removeClass(d).addClass("current"),e.UISetHashOnUrl(t[0].id),setTimeout(function(){e.isNavigating=!1},500),r(t)}}}),e(function(){e.extend({UINavigationHistory:["#"+e("article").eq(0).attr("id")]}),e("nav:not(#global-nav)").each(function(t,i){e("body")[0].classList.contains("splitlayout")||i.classList.add(0===t?"current":"next")}),e("article").each(function(t,i){e("body")[0].classList.contains("splitlayout")||e("body")[0].classList.contains("slide-out-app")||i.classList.add(0===t?"current":"next")}),e("body").on("singletap","a.back",function(){this.classList.contains("back")&&e.UIGoBack()}),e("body").on("singletap doubletap","li",function(){if(!e.isNavigating&&this.hasAttribute("data-goto")&&this.getAttribute("data-goto")&&document.getElementById(this.getAttribute("data-goto"))&&!e(this).parent()[0].classList.contains("deletable")){var t="#"+this.getAttribute("data-goto");e(t).addClass("navigable");var i=e(t);e.UIGoToArticle(i)}}),e("li[data-goto]").each(function(t,i){e(i).closest("article").addClass("navigable");var s="#"+i.getAttribute("data-goto");e(s).addClass("navigable")}),e("article").eq(1)[0]&&e.UISetHashOnUrl(e("article").eq(0)[0].id),e("nav").on(e.eventStart,function(e){e.preventDefault()})}),e(function(){e("body").on("singletap",".button",function(){var t=e(this);t.parent(".segmented")[0]||t.parent(".tabbar")[0]||(t.addClass("selected"),setTimeout(function(){t.removeClass("selected")},500))})}),e.fn.extend({UIBlock:function(t){return t=t?" style='opacity:"+t+"'":" style='opacity: .5;'",e(this).before("<div class='mask'"+t+"></div>"),e("article.current").attr("aria-hidden",!0),this},UIUnblock:function(){return e(".mask").remove(),e("article.current").removeAttr("aria-hidden"),this}}),e.fn.extend({UICenter:function(){if(this[0]){var t,i=e(this),s=i.parent();t="absolute"!==i.css("position")?"relative":"absolute";var n,a,r,o;"absolute"===t?(n=i[0].clientHeight,a=i[0].clientWidth,r=s[0].clientHeight,o=s[0].clientWidth):(n=parseInt(i.css("height"),10),a=parseInt(i.css("width"),10),r=parseInt(s.css("height"),10),o=parseInt(s.css("width"),10));var l,d;"body"===s[0].nodeName?(l=window.innerHeight/2+window.pageYOffset-n/2+"px",d=window.innerWidth/2-a/2+"px"):(l=r/2-n/2+"px",d=o/2-a/2+"px"),"absolute"!==t&&(d=0),i.css({left:d,top:l})}}}),e.fn.extend({UIBusy:function(t){t=t||{};var i,s=this,n=t.color||"#000",a=t.size||"80px",r=t&&"right"===t.position?"align-flush":null,o=t.duration||"2s",l=function(){var t={"-webkit-animation-duration":o};return i=e('<span class="busy"></span>'),e(i).css({"background-color":n,height:a,width:a}),e(i).css(t),e(i).attr("role","progressbar"),r&&e(i).addClass(r),s.append(i),this},d=function(){var t={"-webkit-animation-duration":o};return i=e('<div class="busy"><div></div><div></div></div>'),e(i).css({height:a,width:a,"background-image":"url(\"data:image/svg+xml;utf8,<svg xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' version='1.1' x='0px' y='0px' width='400px' height='400px' viewBox='0 0 400 400' enable-background='new 0 0 400 400' xml:space='preserve'><circle fill='none' stroke='"+n+"' stroke-width='20' stroke-miterlimit='10' cx='199' cy='199' r='174'/></svg>\")"}),e(i).css(t),e(i).attr("role","progressbar"),e(i).innerHTML="<div></div><div></div>",r&&e(i).addClass("align-"+r),s.append(i),this},c=function(){return i=e('<progress class="busy"></progress>'),e(i).css({color:n}),e(i).attr("role","progressbar"),e(i).addClass("win-ring"),r&&e(i).addClass("align-"+r),s.append(i),this};e.isWin?c(t):e.isAndroid||e.isChrome?d(t):(e.isiOS||e.isSafari)&&l(t)}}),e.extend({UIPopup:function(t){if(t){var i,s,n=t.id||e.Uuid(),a=t.title?"<header><h1>"+t.title+"</h1></header>":"",r=t.message?'<p role="note">'+t.message+"</p>":"",o=t.cancelButton?'<a href="javascript:void(null)" class="button cancel" role="button">'+t.cancelButton+"</a>":"",l=t.continueButton?'<a href="javascript:void(null)" class="button continue" role="button">'+t.continueButton+"</a>":"",d=t.callback||e.noop,c=t.empty?' style="padding: 40px 0;" ':"";t.empty?(i="",s=""):(i='<div class="panel">',s="</div>");var u='<div class="popup closed" role="alertdialog" id="'+n+'"'+c+">"+i+a+r+"<footer>"+o+l+"</footer>"+s+"</div>";e("body").append(u),d&&l&&e(".popup").find(".continue").on(e.eventStart,function(){e(".popup").UIPopupClose(),d.call(d)}),e.UICenterPopup(),setTimeout(function(){e("body").find(".popup").removeClass("closed")},200),e("body").find(".popup").UIBlock("0.5");var p=e.eventStart+" singletap "+e.eventEnd;e(".mask").on(p,function(e){e.stopPropagation()})}},UICenterPopup:function(){var t=e(".popup");if(t[0]){var i,s=window.innerHeight/2+window.pageYOffset-t[0].clientHeight/2+"px";i=320===window.innerWidth?"10px":Math.floor((window.innerWidth-318)/2)+"px",t.css(e.isWin?{top:s}:{left:i,top:s})}}}),e.fn.extend({UIPopupClose:function(){(this||this.classList.contains("popup"))&&(e(this).UIUnblock(),e(this).remove())}}),e(function(){e("body").on(e.eventStart,".cancel",function(){e(this).closest(".popup")[0]&&e(this).closest(".popup").UIPopupClose()}),window.onresize=function(){e.UICenterPopup()}}),e.fn.extend({UIPopover:function(t){if(!t)return[];var i,s=e(this);this[0].id?i=this[0].id:(i=e.Uuid(),s.attr("id",i));var n=t.id?t.id:e.Uuid(),a=t.title?"<header><h1>"+t.title+"</h1></header>":"",r=t.callback?t.callback:e.noop,o='<div class="popover" id="'+n+'">'+a+"<section></section></div>",l=function(t){var i,s,n=e(t).offset(),a=n.left,r=e(".popover"),o=r.offset();i=o.left,s=n.top+e(t)[0].clientHeight,r.css(r.width()+n.left>window.innerWidth?{left:window.innerWidth-r.width()-20+"px",top:s+20+"px"}:{left:a+"px",top:s+20+"px"})};e(this).on(e.eventStart,function(){if(e(".mask")[0])return e.UIPopoverClose(),void e("body").UIUnblock();var t=this;e(this).addClass("selected"),setTimeout(function(){e(t).removeClass("selected")},1e3),e("body").append(o),e(".popover").UIBlock(".5");var s="singletap";e.isWin&&e.isDesktop&&(s=e.eventStart+" singletap "+e.eventEnd),e(".mask").on(s,function(e){e.preventDefault(),e.stopPropagation()}),e(".popover").data("triggerEl",i),e.isWin?(l(t),e(".popover").addClass("open")):(e(".popover").addClass("open"),setTimeout(function(){l(t)})),r.call(r,t)})}}),e.extend({UIAlignPopover:function(){var t=e(".popover");if(t.length){var i=t.data("triggerEl"),s=e("#"+i).offset(),n=s.left;t.css(e(t).width()+s.left>window.innerWidth?{left:window.innerWidth-e(t).width()-20+"px"}:{left:n+"px"})}}}),e.extend({UIPopoverClose:function(){e("body").UIUnblock(),e(".popover").css("visibility","hidden"),setTimeout(function(){e(".popover").remove()},10)}}),e(function(){window.onresize=function(){e.UIAlignPopover()};var t=e.eventStart+" singletap "+e.eventEnd;e("body").on(t,".mask",function(t){if(e(".popover")[0])e.UIPopoverClose();else{if(t&&1===t.nodeType)return;t.stopPropogation()}})}),e.fn.extend({UISegmented:function(t){if(!this.hasClass("paging")){var i,s=t&&t.callback?t.callback:e.noop;t&&t.selected&&(i=t.selected),t&&t.callback&&(s=t.callback),this.find("a").each(function(t,s){e(s).find("a").attr("role","radio"),0===i&&0===t&&(s.setAttribute("aria-checked","true"),s.classList.add("selected")),t===i&&(s.setAttribute("aria-checked","true"),s.classList.add("selected"))}),i||this.find(".selected")[0]||this.children().eq(0).addClass("selected"),this.on("singletap",".button",function(t){var i=e(this);this.parentNode.classList.contains("paging")||(i.siblings("a").removeClass("selected"),i.siblings("a").removeAttr("aria-checked"),i.addClass("selected"),i.attr("aria-checked",!0),s.call(this,t))})}}}),e.extend({UICreateSegmented:function(e){var t=e&&e.className?e.className:"",i=e&&e.labels?e.labels:[],s=e&&e.selected?e.selected:0,n=['<div class="segmented'];return t&&n.push(" "+t),n.push('">'),i.forEach(function(e,t){n.push('<a role="radio" class="button'),n.push(s===t?' selected" aria-checked="true"':'"'),n.push(">"),n.push(e),n.push("</a>")}),n.push("</div>"),n.join("")}}),e(function(){e(".segmented").UISegmented()}),e.fn.extend({UIPanelToggle:function(t,i){var s,n=0;n=this.children().hazClass("selected").index()||0,t instanceof Array?s=t.children("div"):"string"==typeof t&&(s=e(t).children("div")),s.eq(n).siblings().css({display:"none"}),i&&i.apply(this,arguments),this.on(e.eventEnd,"a",function(){s.eq(e(this).index()).css({display:"block"}).siblings().css("display","none")}),this.on("singletap",".button",function(){var t=e(this);this.parentNode.classList.contains("paging")||(t.siblings("a").removeClass("selected"),t.siblings("a").removeAttr("aria-checked"),t.addClass("selected"),t.attr("aria-checked",!0))})}}),e.extend({UIPaging:function(){var t=e(".segmented.paging").closest("nav").next();window&&window.jQuery&&e===window.jQuery?e(".segmented.paging").hasClass("horizontal")?t.addClass("horizontal"):e(".segmented.paging").hasClass("vertical")&&t.addClass("vertical"):e(".segmented.paging").hasClass("horizontal")[0]?t.addClass("horizontal"):e(".segmented.paging").hasClass("vertical")[0]&&t.addClass("vertical"),t.children().eq(0).addClass("current"),t.children().eq(0).siblings().addClass("next");var i=function(){return t.children().length};e(".segmented.paging").on(e.eventStart,".button:first-of-type",function(){if(1!==i()){var s=e(this);s.next().removeClass("selected"),s.addClass("selected");var n;n=e("section.current"),0===n.index()?(n.removeClass("current"),t.children().eq(i()-1).addClass("current").removeClass("next"),t.children().eq(i()-1).siblings().removeClass("next").addClass("previous")):(n.removeClass("current").addClass("next"),n.prev().removeClass("previous").addClass("current")),setTimeout(function(){s.removeClass("selected")},250)}}),e(".segmented.paging").on(e.eventStart,".button:last-of-type",function(){if(1!==i()){var s=e(this);s.prev().removeClass("selected"),s.addClass("selected");var n;this.classList.contains("disabled")||(n=e("section.current"),n.index()===i()-1?(n.removeClass("current"),t.children().eq(0).addClass("current").removeClass("previous"),t.children().eq(0).siblings().removeClass("previous").addClass("next")):(n.removeClass("current").addClass("previous"),n.next().removeClass("next").addClass("current")),setTimeout(function(){s.removeClass("selected")},250))}})}}),e.extend({UIDeletable:function(t){if(t&&t.list&&!(!t instanceof Array)){var i,s,n,a,r=e(t.list),o=t.editLabel||"Edit",l=t.doneLabel||"Done",d=t.deleteLabel||"Delete",c=t.placement||"right",u=t.callback||e.noop,p="swiperight";if("rtl"===e("html").attr("dir")&&(p="swipeleft"),e.isWin&&(d=""),!r[0].classList.contains("deletable")){{e("li").eq(1)[0].clientHeight}i=e.concat('<a href="javascript:void(null)" class="button delete">',d,"</a>"),s=e.concat('<a href="javascript:void(null)" class="button edit">',o,"</a>"),n='<span class="deletion-indicator"></span>',"left"===c?r.closest("article").prev().prepend(s):(r.closest("article").prev().append(s),r.closest("article").prev().find("h1").addClass("buttonOnRight"),r.closest("article").prev().find(".edit").addClass("align-flush"),a=r.closest("article").prev().find(".edit")),r.find("li").prepend(n),r.find("li").append(i);var v=function(t,i,s){var n;e.isiOS?n="100px":e.isAndroid&&(n="140px"),e(function(){s.on("singletap",function(){var t=this;this.classList.contains("edit")?(i.addClass("deletable"),setTimeout(function(){t.classList.remove("edit"),t.classList.add("done"),e(t).text(l),e(i).addClass("showIndicators")})):this.classList.contains("done")&&(i.removeClass("deletable"),setTimeout(function(){t.classList.remove("done"),t.classList.add("edit"),e(t).text(o),e(i).removeClass("showIndicators"),e(i).find("li").removeClass("selected")}))}),e(i).on("singletap",".deletion-indicator",function(){return e(this).parent("li").hasClass("selected")?void e(this).parent("li").removeClass("selected"):void e(this).parent("li").addClass("selected")}),(e.isiOS||e.isSafari)&&e(i).on(p,"li",function(){e(this).removeClass("selected")}),e(i).on("singletap",".delete",function(){var i=this,s="-1000%";"rtl"===e("html").attr("dir")&&(s="1000%"),e(this).siblings().css({"-webkit-transform":"translate3d("+s+",0,0)","-webkit-transition":"all 1s ease-out"}),setTimeout(function(){t.call(t,i),e(i).parent().remove()},500)})})};return v(u,r,a)}}}}),e.fn.extend({UISelectList:function(t){var i=t&&t.name?t.name:e.Uuid(),s=this[0];return s&&!e(s).hasClass("select")&&this.addClass("select"),s?(s.classList.add("select"),e(s).find("li").forEach(function(s,n){s.setAttribute("role","radio"),t&&t.selected===n?(s.setAttribute("aria-checked","true"),s.classList.add("selected"),e(s).find("input")[0]?e(s).find("input").attr("checked","checked"):e(s).append('<input type="radio" checked="checked" name="'+i+'">')):e(s).find("input")[0]||e(s).append('<input type="radio" name="'+i+'">')}),void e(s).on("singletap","li",function(){var i=this;e(i).siblings("li").removeClass("selected"),e(i).siblings("li").removeAttr("aria-checked"),e(i).siblings("li").find("input").removeAttr("checked"),e(i).addClass("selected"),i.setAttribute("aria-checked",!0),e(i).find("input").attr("checked","checked"),t&&t.callback&&t.callback.apply(this,arguments)})):[]}}),e.extend({UISheet:function(t){var i=e.Uuid(),s="",n="";t&&(i=t.id?t.id:i,s=t.listClass?" "+t.listClass:"",n=' style="background-color:'+t.background+';" '||"");var a='<div id="'+i+'" class="sheet'+s+'"><div class="handle"></div><section class="scroller-vertical"></section></div>';e("body").append(a),e(".sheet .handle").on(e.eventStart,function(){e.UIHideSheet()})},UIShowSheet:function(){e("article.current").addClass("blurred"),e.isAndroid||e.isChrome?(e(".sheet").css("display","block"),setTimeout(function(){e(".sheet").addClass("opened")},20)):e(".sheet").addClass("opened")},UIHideSheet:function(){e(".sheet").removeClass("opened"),e("article.current").addClass("removeBlurSlow"),setTimeout(function(){e("article").removeClass("blurred"),e("article").removeClass("removeBlurSlow")},500)}}),e.extend({UISlideout:function(t){var i=e("<a class='button slide-out-button' href='javascript:void(null)'></a>"),s='<div class="slide-out"><section></section></div>';e("article").removeClass("next"),e("article").removeClass("current"),e("article").prev().removeClass("next"),e("article").prev().removeClass("current"),t=t||"left",e("body").append(s),e("body").addClass("slide-out-app"),e("article:first-of-type").addClass("show"),e("article:first-of-type").prev().addClass("show"),e("#global-nav").append(i),e(".slide-out-button").on(e.eventStart,function(){e(".slide-out").toggleClass("open")}),e(".slide-out").on("singletap","li",function(){var t="#"+e(this).attr("data-show-article");e.UINavigationHistory[0]=t,e.UISetHashOnUrl(t),e.publish("chui/navigate/leave",e("article.show")[0].id),e.publish("chui/navigate/enter",t),e(".slide-out").removeClass("open"),e("article").removeClass("show"),e("article").prev().removeClass("show"),e(t).addClass("show"),e(t).prev().addClass("show")})}}),e.extend(e.UISlideout,{populate:function(t){var i=e(".slide-out");if(i[0]&&e.isArray(t)){i.find("section").append('<ul class="list"></ul>');var s=i.find("ul");t.forEach(function(e){for(var t in e)s.append("header"===t?'<li class="slideout-header"><h2>'+e[t]+"</h2></li>":'<li data-show-article="'+t+'"><h3>'+e[t]+"</h3></li>")})}}}),e.fn.extend({UIStepper:function(t){if(!t)return[];if(!t.start)return[];if(!t.end)return[];var i=e(this),s=t.start,n=t.end,a=t.defaultValue?t.defaultValue:t.start,r="+",o="-";e.isWin&&(r="",o="");var l='<a href="javascript:void(null)" class="button decrease">'+o+"</a>",d="<label>"+a+'</label><input type="text" value="'+a+'">',c='<a href="javascript:void(null)" class="button increase">'+r+"</a>";i.append(l+d+c),i.data("ui-value",{start:s,end:n,defaultValue:a});var u=function(){var t,s=i.find("input").val(),n=i.data("ui-value"),a=n.start;a>=s?e(this).addClass("disabled"):(t=Number(s)-1,i.find(".button:last-of-type").removeClass("disabled"),i.find("label").text(t),i.find("input")[0].value=t,s===a&&e(this).addClass("disabled"))},p=function(){var t,s=i.find("input").val(),n=i.data("ui-value"),a=n.end;s>=a?e(this).addClass("disabled"):(t=Number(s)+1,i.find(".button:first-of-type").removeClass("disabled"),i.find("label").text(t),i.find("input")[0].value=t,s===a&&e(this).addClass("disabled"))};i.find(".button:first-of-type").on("singletap",function(){u.call(this,i)}),i.find(".button:last-of-type").on("singletap",function(){p.call(this,i)})}}),e.extend({UIResetStepper:function(e){var t=e.data("ui-value").defaultValue;e.find("label").html(t),e.find("input")[0].value=t}}),e.fn.extend({UISwitch:function(){var t=!1;this.forEach(function(i){i.setAttribute("role","checkbox"),e(i).data("ui-setup")!==!0&&(i.querySelector("input")||i.insertAdjacentHTML("afterBegin",'<input type="checkbox">'),i.classList.contains("on")&&i.querySelector("input").setAttribute("checked","checked"),i.querySelector("em")&&(t=!0),t||i.insertAdjacentHTML("afterBegin","<em></em>"),e(i).on("singletap",function(){var e=i.querySelector("input");i.classList.contains("on")?(i.classList.remove("on"),i.removeAttribute("aria-checked"),e.removeAttribute("checked")):(i.classList.add("on"),e.setAttribute("checked","checked"),i.setAttribute("aria-checked",!0))}),e(i).on("swipeleft",function(){var e=i.querySelector("input");i.classList.contains("on")&&(i.classList.remove("on"),i.removeAttribute("aria-checked"),e.removeAttribute("checked"))}),e(i).on("swiperight",function(){var e=i.querySelector("input");i.classList.contains("on")||(i.classList.add("on"),e.setAttribute("checked","checked"),i.setAttribute("aria-checked",!0))}),e(i).data("ui-setup",!0))})}}),e.extend({UICreateSwitch:function(t){var i=t?t.id:e.Uuid(),s=t&&t.name?' name="'+t.name+'"':"",n=t&&t.value?' value="'+t.value+'"':"",a=t&&"on"===t.state?" "+t.state:"",r=t&&"on"===t.state?' checked="checked"':"",o=e.concat('<span class="switch',a,'" id="',i,'"><em></em>','<input type="checkbox"',s,r,n,"></span>");return e(o)}}),e(function(){e(".switch").UISwitch()}),document.addEventListener("touchstart",function(e){var t=e.target,i=0;for(i=0;10>i;i+=1)null!==t&&(void 0!==t.className&&t.className.match("navigable")&&(0===t.scrollTop?t.scrollTop=1:t.scrollTop+t.offsetHeight===t.scrollHeight&&(t.scrollTop=t.scrollTop-1)),t=t.parentNode)}),e.extend({UITabbar:function(t){if(t){e("body").addClass("hasTabBar"),e.isiOS6&&e("body").addClass("isiOS6");for(var i=t.id||e.Uuid(),s=t.selected||"",n='<div class="tabbar" id="'+i+'">',a=e.isiOS||e.isSafari?'<span class="icon"></span>':"",r=0;r<t.tabs;r++)n+='<a class="button '+t.icons[r],s===r+1&&(n+=" selected"),n+='">'+a+"<label>"+t.labels[r]+"</label></a>";n+="</div>",e("body").append(n),e("nav").removeClass("current").addClass("next"),e("nav").eq(s).removeClass("next").addClass("current"),e("article").removeClass("current").addClass("next"),e("article").eq(s-1).removeClass("next").addClass("current"),e("body").find(".tabbar").on("singletap",".button",function(){var t,i,s=this;e.publish("chui/navigate/leave",e("article.current")[0].id),s.classList.add("selected"),e(this).siblings("a").removeClass("selected"),t=e(this).index(),e("article.previous").removeClass("previous").addClass("next"),e("nav.previous").removeClass("previous").addClass("next"),e("article.current").removeClass("current").addClass("next"),e("nav.current").removeClass("current").addClass("next"),i=e("article").eq(t)[0].id,e.publish("chui/navigate/enter",i),window&&window.jQuery?e("article").each(function(t,i){e(i).scrollTop(0)}):e("article").eq(t).siblings("article").forEach(function(e){e.scrollTop=0}),e.UISetHashOnUrl("#"+i),e.UINavigationHistory[0]==="#"+i?e.UINavigationHistory=[e.UINavigationHistory[0]]:1===e.UINavigationHistory.length?e.UINavigationHistory[0]!=="#"+i&&e.UINavigationHistory.push("#"+i):3===e.UINavigationHistory.length?e.UINavigationHistory.pop():e.UINavigationHistory[1]="#"+i,e("article").eq(t).removeClass("next").addClass("current"),e("nav").eq(t+1).removeClass("next").addClass("current")})}}}),e.extend({templates:{},template:function(e,t){var i;t=t||"data",i=/\[\[=([\s\S]+?)\]\]/g;var s=new Function(t,"var p=[];p.push('"+e.replace(/[\r\t\n]/g," ").split("'").join("\\'").replace(i,"',$1,'").split("[[").join("');").split("]]").join("p.push('")+"');return p.join('');");return s}}),e.extend({UISearch:function(t){var i=t&&t.articleId||e("article").eq(0),s=t&&t.id||e.Uuid(),n=t&&t.placeholder||"search",a=t&&t.results||1,r='<div class="searchBar"><input placeholder="'+n+'" type="search" results="'+a+'" id="'+s+'"></div>';e(i).find("section").prepend(r),e.isWin&&(e(i).prev().append(r),e("#"+s).parent().append('<span class="searchGlyph">&#xe11A;</span>'))}})}(window.jQuery);